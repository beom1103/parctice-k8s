# 1장 컨테이너 기술 개요

## 1.1 컨테이너 살펴보기

- 컨테이너는 공유된 OS에서 독립적인 애플리케이션 실행 환경을 작성하는 기술이다.
- 각 실행 환경은 호스트 OS와 격리된 상태가 되고 컨테이너 내부에 실행되는 프로세스 입장에서는 마치 OS 환경을 독점하는 것처럼 보인다.
  - 파일, 프로세스, 네트워크 등 접근할 수 있는 대부분의 시스템 리소스도 다른 컨테이너나 호스트 OS와 격리된다.

### 1.1.1 컨테이너 실행

- 컨테이너는 **컨테이너 이미지**를 바탕으로 작성한다.
- 컨테이너 내에서 여러 프로세스를 실행 가능하지만 되도록 작은 단위(1개)로 만드는 것이 일반적이다.

#### 1.1.2 컨테이너 이미지

- 컨테이너를 실행하려면 바탕이 되는 **컨테이너 이미지**가 필요하다.
- Build, Ship, Run Flow
  - Build: 이미지 작성
  - Ship: 컨테이너 이미지의 머신 간 공유
  - Run: 컨테이너 이미지를 바탕으로 컨테이너 실행
- 이미지는 작성한 머신 뿐 아니라 다른 머신에도 공유 가능ㅎ며 레지스트리라는 서버를 사용해 이미지를 저장하고 배포한다.

## 1.2 기본적인 컨테이너 기술의 특징

### 1.2.1 가벼운 실행 환경

- 가상머신과 실행 환경을 작성한다는 점에서 비슷한 기술이지만, 아래와 같은 차이가 있다.
  - 가상머신: 리눅스 KVM 등의 하이퍼바이저를 사용한 가상화 기술
    - 하이퍼바이저가 가상의 하드웨어를 제공하고 그 위에서 OS와 애플리케이션 실행
    - OS와 하드웨어 사이에 관리계층인 하이퍼바이저를 두고 하나의 물리머신에서 여러 OS를 동시에 작동시키는 기술
      - 주로 AWS, Azure Google 등 클라우드 서비스에서 주용한 실행 환경으로 제공
    - 가상머신 이미지는 보통 몇 기가바이트 이상으로 큰 용량 차지
  - 컨테이너: 도커 등을 사용해 리눅스에서 네임스페이스 같은 격리 기능으로 구현된 애플리케이션 컨테이너
    - 커널 기능을 사용해서 격리된 프로세스로 실행함
    - 컨테이너는 깊에 들어가면 그 실체는 프로세스 -> 다만 OS 커널 기능을 활용해서 일반 프로세스에 비해 환경 분리가 더 강력함
    - 따라서 프로세스 수준으로 작은 크기의 실행 환경으로 다루는게 가능
    - 컨테이너 이미지는 하나의 애플리케이션과 최소한의 의존 컴포넌트만 포함해서 작게 만들어야 한다.
    - 수십 ~ 수백 메가바이트 정도로 작은 편이라 네트워크를 통해 빠르게 공유 가능

### 1.2.2 높은 이식성

- 아래 두가지가 높은 이식성에 특히 중요하다.
  - 컨테이너 이미지의 높은 동작 재현성
  - 업계 표준 규격에 따른 컨테이너의 통일된 조작 방법
- 기본적으로 컨테이너 규격에 대한 표준은 정해져 있기 때문에 높은 이식성이 가능하다.

### 1.2.3 거대한 생태계

- 컨테이너 기술은 인프라 분야에 널리 사용하는 기술이고 오픈소스로 개발된 것만 해도 무척 많다.
- OCI라는 리눅스 재단 산하의 단체를 중심으로 컨테이너 이미지, 레지스트리, 런타임 등 표준 규격이 정해지고 있다.

